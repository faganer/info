<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WordPress 数据库表前缀修改器</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/css/bootstrap.min.css">
</head>

<body>
    <div class="site">
        <div class="container">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="https://getkit.cn/">鸽听网</a></li>
                    <li class="breadcrumb-item"><a href="https://getkit.cn/resources/">在线工具</a></li>
                    <li class="breadcrumb-item active" aria-current="page">WordPress 数据库表前缀修改器</li>
                </ol>
            </nav>
            <!-- breadcrumb -->
            <div class="main">

                <p>一键生成修改数据库表前缀所需的SQL，让你在WordPress修改表前缀之后能够更加方便全站修改。</p>
                <form class="needs-validation" novalidate>
                    <div class="form-group">
                        <label for="old">旧前缀</label>
                        <input type="text" class="form-control" id="old" name="old" placeholder="wp_" required>
                    </div>
                    <div class="form-group">
                        <label for="new">新前缀</label>
                        <input type="text" class="form-control" id="new" name="new" placeholder="getkit_" required>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary ok">确定</button>
                    </div>
                </form>

                <div class="result mt-4 d-none">
                    <p>SQL已经生成，请到MySQL运行：</p>
                    <div class="result-content bg-light overflow-hidden p-4">
                    </div>
                </div>
                <p>相关工具：<a href="https://getkit.cn/resources/WordPress/change-domain.html">WordPress 博客域名更换器</a>。</p>
            </div>
            <!-- .main -->

        </div>
        <!-- .container -->

    </div>
    <!-- .site -->

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.2/dist/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.2/dist/localization/messages_zh.min.js"></script>
    <script>
        $(function () {

            var fv = $(".needs-validation").validate({
                errorElement: "div",
                errorClass: "invalid-feedback", // Use this class to create error labels, to look for existing error labels and to add it to invalid elements.
                errorPlacement: function (error, element) { // 验证失败调用的函数
                    // error.addClass("invalid-feedback"); // 提示信息增加样式
                    if (element.prop("type") === "checkbox") {
                        error.insertAfter(element.parent(
                            "label")); // 待验证的元素如果是checkbox，错误提示放到label中
                    } else {
                        error.insertAfter(element);
                    }
                },
                highlight: function (element, errorClass, validClass) {
                    $(element).addClass("has-error"); // 验证失败时给元素增加样式
                },
                unhighlight: function (element, errorClass, validClass) {
                    $(element).removeClass("has-error"); // 验证成功时去掉元素的样式
                },
                rules: {
                    old: {
                        required: true,
                        url: true
                    },
                    new: {
                        required: true,
                        url: true
                    }
                },
                messages: {
                    old: {
                        required: "请填写旧前缀！",
                    },
                    new: {
                        required: "请填写新前缀",
                    }
                },
                submitHandler: function () {
                    $(".needs-validation").removeClass("was-validated");
                    var oldPrefix = $(".needs-validation input[name='old']").val();
                    var newPrefix = $(".needs-validation input[name='new']").val();
                    $(".result").removeClass("d-none");
                    $(".result-content").html(
                        "<p>RENAME TABLE " + oldPrefix + "comments TO " + newPrefix +
                        "comments;</p><p>RENAME TABLE " + oldPrefix + "commentmeta TO " +
                        newPrefix + "commentmeta;</p><p>RENAME TABLE " + oldPrefix +
                        "links TO " + newPrefix + "links;</p><p>RENAME TABLE " + oldPrefix +
                        "options TO " + newPrefix + "options;</p><p>RENAME TABLE " + oldPrefix +
                        "postmeta TO " + newPrefix + "postmeta;</p><p>RENAME TABLE " +
                        oldPrefix + "posts TO " + newPrefix + "posts;</p><p>RENAME TABLE " +
                        oldPrefix + "terms TO " + newPrefix + "terms;</p><p>RENAME TABLE " +
                        oldPrefix + "termmeta TO " + newPrefix +
                        "termmeta;</p><p>RENAME TABLE " + oldPrefix + "term_relationships TO " +
                        newPrefix + "term_relationships;</p><p>RENAME TABLE " + oldPrefix +
                        "term_taxonomy TO " + newPrefix + "term_taxonomy;</p><p>RENAME TABLE " +
                        oldPrefix + "usermeta TO " + newPrefix +
                        "usermeta;</p><p>RENAME TABLE " + oldPrefix + "users TO " + newPrefix +
                        "users;</p><p>UPDATE " + newPrefix +
                        "options SET option_name = REPLACE(option_name, '" + oldPrefix +
                        "', '" + newPrefix + "') WHERE option_name LIKE '" + oldPrefix +
                        "%';</p><p>UPDATE " + newPrefix +
                        "usermeta SET meta_key = REPLACE(meta_key, '" + oldPrefix + "', '" +
                        newPrefix + "') WHERE meta_key LIKE '" + oldPrefix + "%';</p>");
                    return // 校验通过
                }
            });
            $('.ok').click(function () {
                $(".needs-validation").addClass("was-validated");
                fv;
            });

        });
    </script>
    <script>
        // 百度统计
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?d03c6aa8bd7c946819fe6912a648b1c5";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();

        // 百度自动推送
        (function () {
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
            } else {
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();

		// 360自动收录
		(function(){
		var src = "https://s.ssl.qhres2.com/ssl/ab77b6ea7f3fbf79.js";
		document.write('<script src="' + src + '" id="sozz"><\/script>');
		})();
    </script>
</body>

</html>
